// Copyright 2017-2021 @polkadot/api authors & contributors
// SPDX-License-Identifier: Apache-2.0
// Most generic typings for `api.derive.*.*`
// Exact typings for a particular section `api.derive.section.*`
// Exact typings for all sections `api.derive.*.*`
// A technically unsafe version of Object.keys(obj) that assumes that
// obj only has known properties of T
function keys(obj) {
  return Object.keys(obj);
}
/**
 * This is a methods decorator which keeps all type information.
 */


function decorateMethods(section, decorateMethod) {
  const result = {};
  const names = keys(section);

  for (let k = 0; k < names.length; k++) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
    result[names[k]] = decorateMethod(section[names[k]]);
  }

  return result;
}
/**
 * This is a section decorator which keeps all type information.
 */


export function decorateSections(allSections, decorateMethod) {
  const result = {};
  const names = keys(allSections);

  for (let k = 0; k < names.length; k++) {
    result[names[k]] = decorateMethods(allSections[names[k]], decorateMethod);
  }

  return result;
}